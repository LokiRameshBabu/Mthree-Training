# SQL Guide

## 1. Foreign Key
A **Foreign Key** is a field (or collection of fields) in one table that refers to the **Primary Key** in another table. It enforces referential integrity, ensuring that a record in one table corresponds to a valid record in another.

### Characteristics:
- Ensures **referential integrity** between tables.
- Can accept **NULL values** unless specified otherwise.
- A table can have multiple **foreign keys**, referencing different parent tables.

### Example:
```sql
CREATE TABLE Department (
    dept_id INT PRIMARY KEY,
    dept_name VARCHAR(50)
);

CREATE TABLE Employee (
    emp_id INT PRIMARY KEY,
    emp_name VARCHAR(50),
    dept_id INT,
    FOREIGN KEY (dept_id) REFERENCES Department(dept_id)
);
```
![Foreign Key Example](path/to/foreign_key_image.png)

---

## 2. Primary Key
A **Primary Key** uniquely identifies each record in a table. It must contain **unique** values and cannot contain **NULL** values.

### Characteristics:
- Ensures **uniqueness** for each record.
- Cannot contain **NULL values**.
- A table can have **only one primary key**, but it may consist of multiple columns (composite key).

### Example:
```sql
CREATE TABLE Students (
    student_id INT PRIMARY KEY,
    name VARCHAR(50),
    age INT NOT NULL
);
```
![Primary Key Example](path/to/primary_key_image.png)

---

## 3. Candidate Key
A **Candidate Key** is an attribute, or set of attributes, that can uniquely identify a row in a table. One of the candidate keys is chosen as the primary key.

### Characteristics:
- A table can have **multiple candidate keys**.
- One candidate key is chosen as the **primary key**.
- Other candidate keys may serve as **alternate keys**.

### Example:
```sql
CREATE TABLE Student (
    student_id INT,
    email VARCHAR(50),
    phone_number VARCHAR(15),
    PRIMARY KEY (student_id),
    UNIQUE (email),
    UNIQUE (phone_number)
);
```
![Candidate Key Example](path/to/candidate_key_image.png)

---

## 4. ER Diagram
An **Entity-Relationship (ER) Diagram** visually represents entities, attributes, and relationships in a database.

### Components:
1. **Entities** – Represent objects (e.g., Student, Course, Employee).
2. **Attributes** – Represent properties (e.g., student_id, name, age).
3. **Relationships** – Represent associations (e.g., Student enrolls in Course).

### Example:
![ER Diagram Example](path/to/er_diagram_image.png)

---

## 5. Normalization
Normalization organizes data to reduce redundancy and improve integrity.

### Normal Forms:
| Normal Form | Description | Example Fix |
|-------------|------------|-------------|
| **1NF** | No repeating values or multi-valued attributes | Split multi-valued attributes into separate rows |
| **2NF** | Removes partial dependencies | Move attributes dependent only on part of a composite key |
| **3NF** | Removes transitive dependencies | Move dependent attributes to another table |
| **BCNF** | Ensures every determinant is a candidate key | Restructure if 3NF still has anomalies |

### Example:
```sql
-- Before Normalization (1NF Violation)
CREATE TABLE Student (
    student_id INT PRIMARY KEY,
    name VARCHAR(50),
    phone_numbers VARCHAR(100) -- Multiple phone numbers stored as comma-separated values
);

-- After 1NF Fix
CREATE TABLE Student (
    student_id INT PRIMARY KEY,
    name VARCHAR(50)
);

CREATE TABLE StudentPhone (
    student_id INT,
    phone_number VARCHAR(15),
    FOREIGN KEY (student_id) REFERENCES Student(student_id)
);
```
![Normalization Example](path/to/normalization_image.png)

---

## 6. Stored Procedures
A **Stored Procedure** is a precompiled SQL script stored in the database for reuse.

### Benefits:
- **Improves performance** by reducing compilation overhead.
- **Encapsulates logic**, reducing code duplication.
- **Enhances security** by restricting direct table access.

### Example:
```sql
CREATE PROCEDURE sp_insert_student(
    IN p_first_name VARCHAR(50),
    IN p_last_name VARCHAR(50),
    IN p_email VARCHAR(100)
)
BEGIN
    INSERT INTO students (first_name, last_name, email, enrollment_date)
    VALUES (p_first_name, p_last_name, p_email, CURDATE());
END;
```
![Stored Procedure Example](path/to/stored_procedure_image.png)

---

## 7. Practice Problems
1. **Foreign Key Constraint**: Create a **Course** table where `student_id` is a foreign key referencing the `Student` table.
2. **Normalization**: Convert a **denormalized employee table** into **3NF**.
3. **Stored Procedure**: Write a stored procedure to **update employee salaries** based on performance ratings.

---

## Author
[Lokeswari](https://github.com/LokiRameshBabu/c406firstproject)
